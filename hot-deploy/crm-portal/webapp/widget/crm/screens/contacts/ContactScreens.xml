<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">

    <screen name="main-section-decorator">
        <section>
            <actions>
                <set field="sectionName" from-field="titleSelect" global="true"/>
                <set field="applicationMenuName" value="MainAppBar" global="true"/>
            </actions>
            <widgets>
                <include-screen name="main-decorator" location="component://crm/webapp/widget/crm/screens/common/CommonScreens.xml"/>
            </widgets>
        </section>
    </screen>
	<screen name="createContact">
		<section>
			<actions>
			<set field="titleProperty" value="Create Contact" global="true"/>
			<set field="titleSelect" value="ContactBar" global="true"/>	
			<script location="component://crm/webapp/crm/WEB-INF/actions/contacts/viewContacts.groovy"/>
					
			</actions>
			<widgets>
				<decorator-screen name="main-section-decorator">
					<decorator-section name="top-content">
						<platform-specific>
							<html>
								<html-template location="component://crm/webapp/crm/contacts/createContact.ftl"/>
							</html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
    <screen name="updateContact">
		<section>
			<actions>
			<set field="titleProperty" value="Update Contact" global="true"/>
		 	<set field="titleSelect" value="ContactBar" global="true"/>
			<script location="component://crm/webapp/crm/WEB-INF/actions/contacts/viewContacts.groovy"/>
	        <script location="component://crm/webapp/crm/WEB-INF/actions/contacts/partyClassification.groovy"/>				
			</actions>
			<widgets>
            <section>
            <condition>
                <if-compare field="haveDataPermission" operator="equals" value="Y" type="String"/>
            </condition>
			<widgets>
				<decorator-screen name="main-section-decorator">
					<decorator-section name="top-content">
						<platform-specific>
							<html>
								<html-template location="component://crm/webapp/crm/contacts/updateContact.ftl"/>
							</html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
			<fail-widgets>
                    <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                        <decorator-section name="top-content">
                            <label style="h3">${uiLabelMap.permissionDenied}</label>
                        </decorator-section>
                    </decorator-screen>
                </fail-widgets>
            </section>
            </widgets>
		</section>
	</screen>
	<screen name="findContact">
		<section>
			<actions>
			<set field="titleProperty" value="Find Contact" global="true"/>
			<set field="titleSelect" value="ContactBar" global="true"/>
				<script location="component://crm/webapp/crm/WEB-INF/actions/contacts/findContacts.groovy"/>	
			</actions>
			<widgets>
				<decorator-screen name="main-section-decorator">
					<decorator-section name="top-content">
						<platform-specific>
							<html>
								<html-template location="component://crm/webapp/crm/contacts/findContact.ftl"/>
							</html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
    <screen name="viewContact">
		<section>
			<actions>
			<set field="titleProperty" value="View Contact" global="true"/>
			<set field="titleSelect" value="ContactBar" global="true"/>
			<set field="currentRole" value="CONTACT"/>
			<script location="component://crm/webapp/crm/WEB-INF/actions/contacts/getCampaignDetails.groovy"/>
			<script location="component://crm/webapp/crm/WEB-INF/actions/contacts/viewContacts.groovy"/>
			<script location="component://crm/webapp/crm/WEB-INF/actions/account/partyContactInfo.groovy"/>
			<script location="component://crm/webapp/crm/WEB-INF/actions/common/writeEmail.groovy"/>
			<!-- <script location="component://crm/webapp/crm/WEB-INF/actions/common/notes.groovy"/> -->
			<script location="component://crm/webapp/crm/WEB-INF/actions/common/getAttribute.groovy"/>
			<script location="component://crm/webapp/crm/WEB-INF/actions/common/personResponsibleFor.groovy"/>
			<script location="component://crm/webapp/crm/WEB-INF/actions/common/createLogCall.groovy"/>
			</actions>
			
			<widgets>
			<section>
			<condition>
                <if-compare field="haveDataPermission" operator="equals" value="Y" type="String"/>
            </condition>
            <widgets>
				<decorator-screen name="main-section-decorator">
					<decorator-section name="top-content">
						<platform-specific>
							<html>
								<html-template location="component://crm/webapp/crm/contacts/viewContacts/viewContact.ftl"/>
							</html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
				</widgets>
                <fail-widgets>
                    <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                        <decorator-section name="top-content">
                            <label style="h3">${uiLabelMap.permissionDenied}</label>
                        </decorator-section>
                    </decorator-screen>
                </fail-widgets>
            </section>
			</widgets>
		</section>
	</screen>
    <screen name="createBookMarkUrl">
		<section>
			<actions>
			<set field="titleProperty" value="Create Attachments" global="true"/>
			<set field="titleSelect" from-field="parameters.select" global="true"/>
			</actions>
			<widgets>
				<decorator-screen name="main-section-decorator">
					<decorator-section name="top-content">
						<platform-specific>
							<html>
								<html-template location="component://crm/webapp/crm/common/addBookUrl.ftl"/>
							</html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="viewContactLead">
		<section>
			<actions>
				<script location="component://crm/webapp/crm/WEB-INF/actions/lead/viewContactLead.groovy"/>
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://crm/webapp/crm/contacts/viewContacts/contactLeadView.ftl"/>
					</html>
				</platform-specific>
			</widgets>
		</section>
  	</screen>
  	<screen name="viewFindLeadsinContact">
		<section>
			<actions>
				<property-map resource="crmUiLabels" map-name="uiLabelMap" global="true"/>
				<script location="component://crm/webapp/crm/WEB-INF/actions/lead/findLeads.groovy"/>
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://crm/webapp/crm/contacts/viewContacts/viewFindLeadModal.ftl"/>
					</html>
				</platform-specific>
			</widgets>
		</section>
  	</screen>
</screens>