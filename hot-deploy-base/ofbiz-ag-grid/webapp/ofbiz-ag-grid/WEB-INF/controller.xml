<?xml version="1.0" encoding="UTF-8"?>
<site-conf xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/site-conf.xsd">
    <!-- The controller elements that are common to all OFBiz components
         can be found in the following xml file. A component can override the
         elements found in the common-controller.xml file. -->
    <include location="component://common/webcommon/WEB-INF/common-controller.xml"/>
	<include location="component://admin-portal/webapp/admin-portal/WEB-INF/controller.xml"/>
    <description>ofbiz-ag-grid Component Site Configuration File</description>

    <!-- Events to run on every request before security (chains exempt) -->
    <!--
    <preprocessor>
    </preprocessor>
    -->
    <!-- Events to run on every request after all other processing (chains exempt) -->
    <!--
    <postprocessor>
        <event name="test" type="java" path="org.ofbiz.webapp.event.TestEvent" invoke="test"/>
    </postprocessor>
    -->

    <!-- Request Mappings -->
    <request-map uri="main">
    	<security https="true" auth="true"/>
    	<response name="success" type="view" value="main"/>
    </request-map>
    <request-map uri="performFindList">
		<security https="false" auth="false" />
		<event type="service" invoke="fio.performFindList" />
		<response name="success" type="request" value="json" />
		<response name="error" type="request" value="json" />
	</request-map>
		
	<request-map uri="allGridUserConfig">
		<security https="false" auth="false" />
		<event type="java" path="org.fio.ag.grid.perference.GridUserPreferenceConfigServices" invoke="fetchAllGridUserConfig" />
		<response name="success" type="none" />
		<response name="error" type="request" value="json" />
	</request-map>	
	<request-map uri="getGridUserConfig">
		<security https="false" auth="false" />
		<event type="java" path="org.fio.ag.grid.perference.GridUserPreferenceConfigServices" invoke="getGridUserConfig" />
		<response name="success" type="none" />
		<response name="error" type="request" value="json" />
	</request-map>
	<request-map uri="saveGridUserConfig">
		<security https="false" auth="false" />
		<event type="java" path="org.fio.ag.grid.perference.GridUserPreferenceConfigServices" invoke="saveGridConfigFromAgGridUI" />
		<response name="success" type="none" />
		<response name="error" type="request" value="json" />
	</request-map>
	<request-map uri="saveUserPrefGridConfig">
		<security https="false" auth="false" />
		<event type="java" path="org.fio.ag.grid.perference.GridUserPreferenceConfigServices" invoke="saveUserGridConfigFromAgGrid" />
		<response name="success" type="none" />
		<response name="error" type="none" />
	</request-map>
	
	
	
	<request-map uri="adminSaveGrid">
		<security https="false" auth="false" />
		<event type="java" path="org.fio.ag.grid.perference.GridUserPreferenceConfigServices" invoke="saveGridConfigFromGridAdmin" />
		<response name="success" type="none" />
		<response name="error" type="request" value="json" />
	</request-map>
	
	<request-map uri="adminRemoveGrid">
		<security https="false" auth="false" />
		<event type="java" path="org.fio.ag.grid.perference.GridUserPreferenceConfigServices" invoke="removeGridConfigFromGridAdmin" />
		<response name="success" type="none" />
		<response name="error" type="request" value="json" />
	</request-map>
	
	<request-map uri="dataCreate">
		<security https="false" auth="false" />
		<event type="java" path="org.fio.ag.grid.services.AgGridCrudEntityAutoServices" invoke="dataCreate" />
		<response name="success" type="none" />
		<response name="error" type="request" value="json" />
	</request-map>
	<request-map uri="dataUpdate">
		<security https="false" auth="false" />
		<event type="java" path="org.fio.ag.grid.services.AgGridCrudEntityAutoServices" invoke="dataUpdate" />
		<response name="success" type="none" />
		<response name="error" type="request" value="json" />
	</request-map>
	<request-map uri="dataRemove">
		<security https="false" auth="false" />
		<event type="java" path="org.fio.ag.grid.services.AgGridCrudEntityAutoServices" invoke="dataRemove" />
		<response name="success" type="none" />
		<response name="error" type="request" value="json" />
	</request-map>
    
    <request-map uri="findAgGridConfig">
    	<security https="true" auth="true" />
    	<response name="success" type="view" value="findAgGridConfig"/>
    	<response name="error" type="view" value="findAgGridConfig"/>
    </request-map>
    <request-map uri="viewAgGrid">
    	<security https="true" auth="true" />
    	<response name="success" type="view" value="viewAgGrid"/>
    	<response name="error" type="view" value="viewAgGrid"/>
    </request-map>
    <request-map uri="editAgGrid">
    	<security https="true" auth="true" />
    	<response name="success" type="view" value="editAgGrid"/>
    	<response name="error" type="view" value="editAgGrid"/>
    </request-map>
    
    <request-map uri="cloneAgGridInstance">
    	<security https="true" auth="true" />
    	<response name="success" type="view" value="cloneAgGridInstance"/>
    	<response name="error" type="view" value="cloneAgGridInstance"/>
    </request-map>
    <request-map uri="createAgGridInstance">
    	<security https="true" auth="true" />
    	<response name="success" type="view" value="createAgGridInstance"/>
    	<response name="error" type="view" value="createAgGridInstance"/>
    </request-map>
    
    <request-map uri="getAllGridUserConfig">
		<security https="false" auth="false" />
		<event type="java" path="org.fio.ag.grid.events.AjaxEvents" invoke="getAllGridUserConfig" />
		<response name="success" type="none" />
		<response name="error" type="request" value="json" />
	</request-map>
	<request-map uri="updateGridUserConfig">
		<security https="true" auth="true" />
		<event type="java" path="org.fio.ag.grid.services.ConfigurationServices" invoke="updateGridUserConfig" />
		<response name="success" type="request-redirect"  value="viewAgGrid">
			<redirect-parameter name="instanceId"/>
			<redirect-parameter name="userId"/>
			<redirect-parameter name="role"/>			
		</response>
		<response name="error" type="view" value="editAgGrid" />
	</request-map>
	
	<request-map uri="createGridUserConfig">
		<security https="true" auth="true" />
		<event type="java" path="org.fio.ag.grid.services.ConfigurationServices" invoke="createGridUserConfig" />
		<response name="success" type="request-redirect"  value="viewAgGrid">
			<redirect-parameter name="instanceId"/>
			<redirect-parameter name="userId"/>
			<redirect-parameter name="role"/>			
		</response>
		<response name="error" type="view" value="createAgGridInstance" />
	</request-map>
	
	<request-map uri="cloneGridUserConfig">
		<security https="true" auth="true" />
		<event type="java" path="org.fio.ag.grid.services.ConfigurationServices" invoke="createGridUserConfig" />
		<response name="success" type="request-redirect"  value="viewAgGrid">
			<redirect-parameter name="instanceId"/>
			<redirect-parameter name="userId"/>
			<redirect-parameter name="role"/>			
		</response>
		<response name="error" type="view" value="cloneAgGridInstance" />
	</request-map>
	
	<request-map uri="findAgGridAccessConfig">
        <security https="true" auth="true"/>
        <response name="success" type="view" value="findAgGridAccessConfig" />
        <response name="error" type="view" value="findAgGridAccessConfig" />
    </request-map>
	<request-map uri="agGridAccessConfig">
        <security https="true" auth="true"/>
        <response name="success" type="view" value="agGridAccessConfig" />
        <response name="error" type="view" value="agGridAccessConfig" />
    </request-map>
    <request-map uri="viewAgGridAccessConfig">
        <security https="true" auth="true"/>
        <response name="success" type="view" value="viewAgGridAccessConfig" />
        <response name="error" type="view" value="viewAgGridAccessConfig" />
    </request-map>
    <request-map uri="updateAgGridAccessConfig">
        <security https="true" auth="true"/>
        <response name="success" type="view" value="updateAgGridAccessConfig" />
        <response name="error" type="view" value="updateAgGridAccessConfig" />
    </request-map>
	<request-map uri="createAgGridAccessConfiguration">
		<security https="true" auth="true" />
		<event type="java" path="org.fio.ag.grid.services.ConfigurationServices" invoke="createAgGridAccessConfig" />
		<response name="success" type="request-redirect"  value="viewAgGridAccessConfig">
			<redirect-parameter name="instanceId"/>
			<redirect-parameter name="groupId"/>		
		</response>
		<response name="error" type="view" value="agGridAccessConfig" />
	</request-map>
	<request-map uri="updateAgGridAccessConfiguration">
		<security https="true" auth="true" />
		<event type="java" path="org.fio.ag.grid.services.ConfigurationServices" invoke="updateAgGridAccessConfig" />
		<response name="success" type="request-redirect"  value="viewAgGridAccessConfig">
			<redirect-parameter name="instanceId"/>
			<redirect-parameter name="groupId"/>		
		</response>
		<response name="error" type="view" value="agGridAccessConfig" />
	</request-map>
	
	<request-map uri="getAgGridAccessConfig">
		<security https="false" auth="false" />
		<event type="java" path="org.fio.ag.grid.events.AjaxEvents" invoke="getAgGridAccessConfig" />
		<response name="success" type="none" />
		<response name="error" type="request" value="json" />
	</request-map>
	
	<request-map uri="userColumnManagement">
		<security https="true" auth="true"/>
		<response name="success" type="view" value="userColumnManagement"/>
		<response name="error" type="view" value="userColumnManagement" />
	</request-map>
    
    <request-map uri="updateUserGridConfiguration">
		<security https="true" auth="true" />
		<event type="java" path="org.fio.ag.grid.services.ConfigurationServices" invoke="updateUserGridConfiguration" />
		<response name="success" type="request-redirect"  value="userColumnManagement">
			<redirect-parameter name="gridInstanceId"/>
			<redirect-parameter name="gridUserId"/>		
		</response>
		<response name="error" type="request-redirect"  value="userColumnManagement">
			<redirect-parameter name="gridInstanceId"/>
			<redirect-parameter name="gridUserId"/>		
		</response>
	</request-map>
	
	<request-map uri="getGridInstanceInfo">
		<security https="true" auth="false" />
		<event type="java" path="org.fio.ag.grid.events.AjaxEvents" invoke="getGridInstanceInfo" />
		<response name="success" type="none" />
		<response name="error" type="none" />
	</request-map>
	
	<request-map uri="adminColumnManagement">
    	<security https="true" auth="true" />
    	<response name="success" type="view" value="adminColumnManagement"/>
    	<response name="error" type="view" value="adminColumnManagement"/>
    </request-map>
    
    
    <request-map uri="updateAdminGridInstance">
		<security https="true" auth="false" />
		<event type="java" path="org.fio.ag.grid.services.ConfigurationServices" invoke="updateAdminGridInstance" />
		<response name="success" type="request-redirect"  value="adminColumnManagement">
			<redirect-parameter name="gridInstanceId"/>
			<redirect-parameter name="gridUserId"/>		
		</response>
		<response name="error" type="request-redirect"  value="adminColumnManagement">
			<redirect-parameter name="gridInstanceId"/>
			<redirect-parameter name="gridUserId"/>		
		</response>
	</request-map>
	
	<request-map uri="getGridUserConfigNew">
		<security https="false" auth="false" />
		<event type="java" path="org.fio.ag.grid.perference.GridUserPreferenceConfigServices" invoke="getGridUserConfigNew" />
		<response name="success" type="none" />
		<response name="error" type="request" value="json" />
	</request-map>
    
    <!-- View Mappings -->
    <view-map name="main" type="screen" page="component://ofbiz-ag-grid/widget/grid/FioGridScreens.xml#ListAgGridConfiguration"/>
    <view-map name="findAgGridConfig" type="screen" page="component://ofbiz-ag-grid/widget/grid/FioGridScreens.xml#ListAgGridConfiguration"/>
    <view-map name="viewAgGrid" type="screen" page="component://ofbiz-ag-grid/widget/grid/FioGridScreens.xml#ViewAgGrid"/>
    <view-map name="editAgGrid" type="screen" page="component://ofbiz-ag-grid/widget/grid/FioGridScreens.xml#EditAgGrid"/>
    <view-map name="cloneAgGridInstance" type="screen" page="component://ofbiz-ag-grid/widget/grid/FioGridScreens.xml#CloneAgGridInstance"/>
    <view-map name="createAgGridInstance" type="screen" page="component://ofbiz-ag-grid/widget/grid/FioGridScreens.xml#CreateAgGridInstance"/>    
    <view-map name="findAgGridAccessConfig" type="screen" page="component://ofbiz-ag-grid/widget/grid/FioGridScreens.xml#FindAgGridAccessConfig"/>
    <view-map name="agGridAccessConfig" type="screen" page="component://ofbiz-ag-grid/widget/grid/FioGridScreens.xml#AgGridAccessConfig"/>
    <view-map name="viewAgGridAccessConfig" type="screen" page="component://ofbiz-ag-grid/widget/grid/FioGridScreens.xml#ViewAgGridAccessConfig"/>
    <view-map name="updateAgGridAccessConfig" type="screen" page="component://ofbiz-ag-grid/widget/grid/FioGridScreens.xml#UpdateAgGridAccessConfig"/>
    <view-map name="userColumnManagement" type="screen" page="component://ofbiz-ag-grid/widget/configuration/ConfigurationScreens.xml#UserColumnManagement"/>
    <view-map name="adminColumnManagement" type="screen" page="component://ofbiz-ag-grid/widget/configuration/ConfigurationScreens.xml#AdminColumnManagement"/>
    
</site-conf>