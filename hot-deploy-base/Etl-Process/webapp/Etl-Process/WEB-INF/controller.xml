<?xml version="1.0" encoding="UTF-8"?>
<site-conf xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/site-conf.xsd">
	<!-- The controller elements that are common to all OFBiz components can 
		be found in the following xml file. A component can override the elements 
		found in the common-controller.xml file. -->
	<include location="component://common/webcommon/WEB-INF/common-controller.xml" />

	<description>Etl-Process Component Site Configuration File</description>

	<!-- Events to run on every request before security (chains exempt) -->
	<!-- <preprocessor> </preprocessor> -->
	<!-- Events to run on every request after all other processing (chains exempt) -->
	<!-- <postprocessor> <event name="test" type="java" path="org.ofbiz.webapp.event.TestEvent" 
		invoke="test"/> </postprocessor> -->

	<!-- view handlers -->
	<!-- <handler name="screen" type="view" class="org.ofbiz.widget.screen.ScreenWidgetViewHandler" 
		/> -->
	<!-- Request Mappings -->
	<handler name="ftl" type="view" class="org.ofbiz.webapp.ftl.FreeMarkerViewHandler"/>
    <request-map uri="login">
        <security https="true" auth="false"/>
        <event type="java" path="org.ofbiz.webapp.control.LoginWorker" invoke="login"/>
        <response name="success" type="view" value="login"/>
        <response name="requirePasswordChange" type="view" value="requirePasswordChange"/>
        <response name="error" type="view" value="login"/>
    </request-map>
    <request-map uri="logout">
        <security https="true" auth="true"/>
        <event type="java" path="org.ofbiz.webapp.control.LoginWorker" invoke="logout"/>
        <response name="success" type="request-redirect" value="main"/>
        <response name="error" type="request-redirect" value="main"/>
    </request-map>
	<request-map uri="main">
		<security https="true" auth="true" />
		<response name="success" type="view" value="etlUsers" />
		<response name="error" type="view" value="etlUsers" />
	</request-map>

	<request-map uri="myHome">
		<security https="true" auth="true" />
		<response name="success" type="view" value="myHome" />
	</request-map>
	<request-map uri="etlProcessConfiguration">
		<security https="true" auth="true" />
		<response name="success" type="view" value="etlProcessConfiguration" />
	</request-map>
	<request-map uri="etlUsers">
		<security https="true" auth="true" />
		<response name="success" type="view" value="etlUsers" />
	</request-map>
	
	<request-map uri="uploadCSVFile">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.upload.ETLFileUpload"
			invoke="uploadCSVFile" />
		<response name="success" type="request-redirect" value="myHome" >
			<redirect-parameter name="listName" />
		</response>
		<response name="error" type="view" value="myHome" />
	</request-map>
	
	
	<request-map uri="getColumnsByTable">
		<security https="true" auth="false" />
		<event type="java" invoke="getFeildNameList" path="org.opentaps.common.event.AjaxEvents" />
		<response name="success" type="none" />
		<response name="error" type="none" />
	</request-map>
	<request-map uri="getCompleteAssociatedFromEtlMapping">
		<security https="true" auth="false" />
		<event type="java" invoke="getCompleteAssociatedFromEtlMapping"
			path="org.opentaps.common.event.AjaxEvents" />
		<response name="success" type="none" />
		<response name="error" type="none" />
	</request-map>
	<request-map uri="getMapElement">
		<security https="true" auth="false" />
		<event type="java" invoke="getMapElement" path="org.opentaps.common.event.AjaxEvents" />
		<response name="success" type="none" />
		<response name="error" type="none" />
	</request-map>
	<request-map uri="applyEtlModel">
		<security https="true" auth="true" />
		<response name="success" type="view" value="applyEtlModel" />
		<response name="error" type="view" value="applyEtlModel" />
	</request-map>
	<request-map uri="getEtlSource">
		<security https="true" auth="false" />
		<event type="java" invoke="getEtlSource" path="org.opentaps.common.event.AjaxEvents" />
		<response name="success" type="none" />
		<response name="error" type="none" />
	</request-map>
	<request-map uri="getModalProcessAssociation">
		<security https="true" auth="false" />
		<event type="java" invoke="getModalProcessAssociation" path="org.opentaps.common.event.AjaxEvents" />
		<response name="success" type="none" />
		<response name="error" type="none" />
	</request-map>
	<request-map uri="migrateFromStagingToEtlFinal">
		<security https="true" auth="false" />
		<event type="java" invoke="migrateFromStagingToEtlFinal" path="org.opentaps.common.event.AjaxEvents" />
		<response name="success" type="none" />
		<response name="error" type="none" />
	</request-map>
	<request-map uri="etlConfiguration">
		<security https="true" auth="false" />
		<response name="success" type="view" value="etlConfigurationExt" />
		<response name="error" type="view" value="etlConfigurationExt" />
	</request-map>
	<request-map uri="createDefaultConfiguration">
		<security https="true" auth="false" />
		<event type="java" invoke="createDefaultservice"
			path="org.etlprocess.service.EtlConfigurationServices" />
		<response name="success" type="request-redirect" value="etlConfiguration">
			<redirect-parameter name="model" />
			<redirect-parameter name="etlDestTableName" />
		</response>
		<response name="error" type="view" value="etlConfiguration" />
	</request-map>
	<request-map uri="removeDefault">
		<security https="true" auth="false" />
		<event type="java" invoke="removeDefaultservice"
			path="org.etlprocess.service.EtlConfigurationServices" />
		<response name="success" type="view" value="etlConfiguration">
			<redirect-parameter name="model" />
			<redirect-parameter name="etlDestTableName" />
		</response>
		<response name="error" type="view" value="etlConfiguration" />
	</request-map>
	<request-map uri="removeEtlMappedElement">
		<security https="true" auth="false" />
		<event type="java" invoke="removeMappedList" path="org.opentaps.common.event.AjaxEvents" />
		<response name="success" type="none" />
		<response name="error" type="none" />
	</request-map>
	
	<request-map uri="uploadEtlFile">
		<security https="true" auth="false" />
		<event type="java" path="org.groupfio.etl.process.event.ETLFileUpload"
			invoke="uploadEtlFileService" />
		<response name="success" type="request-redirect" value="applyEtlModel">
			<redirect-parameter name="model" />
			<redirect-parameter name="id" value="1" />
		</response>
		<response name="error" type="request-redirect" value="applyEtlModel">
			<redirect-parameter name="model" />
			<redirect-parameter name="processId" />
			<redirect-parameter name="id" value="1" />
		</response>
	</request-map>
	
	<request-map uri="getEtlImportType">
		<security https="false" auth="true" />
		<event type="java" path="org.opentaps.common.event.AjaxEvents" invoke="getEtlImportTypeData"/>
		<response name="success" type="none" />
		<response name="error" type="none" />
	</request-map>	
	<request-map uri="createEtlProcess">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.upload.ETLFileUpload"
			invoke="createEtlProcessService" />
		<response name="success" type="request" value="etlProcessConfiguration" />
		<response name="error" type="request" value="etlProcessConfiguration" />
	</request-map>
	<request-map uri="updateEtlProcess">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.upload.ETLFileUpload"
			invoke="updateEtlProcessService" />
		<response name="success" type="request" value="etlProcessConfiguration" />
		<response name="error" type="request" value="etlProcessConfiguration" />
	</request-map>
		<request-map uri="addETLGroup">
		<security https="false" auth="true" />
		<event type="service" invoke="addETLGroup" />
		<response name="success" type="request" value="etlConfiguration" />
		<response name="error" type="request" value="etlConfiguration" />
	</request-map>
	<request-map uri="updateEtlGroup">
		<security https="false" auth="true" />
		<event type="service" invoke="updateETLGroup" />
		<response name="success" type="request" value="etlConfiguration" />
		<response name="error" type="request" value="etlConfiguration" />
	</request-map>	
	
	<request-map uri="updateEtlHeaderConfig">
		<security https="false" auth="true" />
		<event type="service" invoke="updateEtlHeaderConfig" />
		<response name="success" type="request" value="etlConfiguration" />
		<response name="error" type="request" value="etlConfiguration" />
	</request-map>
	
	<request-map uri="removeEtlGroup">
		<security https="false" auth="true" />
		<event type="service" invoke="removeETLGroup" />
		<response name="success" type="request" value="etlConfiguration" />
		<response name="error" type="request" value="etlConfiguration" />
	</request-map>		
	<request-map uri="addEtlModelGrouping">
		<security https="false" auth="true" />
		<event type="service" invoke="addEtlModelGrouping" />
		<response name="success" type="request" value="etlConfiguration" />
		<response name="error" type="request" value="etlConfiguration" />
	</request-map>   
	
	<request-map uri="updateEtlModelGrouping">
		<security https="false" auth="true" />
		<event type="service" invoke="updateEtlModelGrouping" />
		<response name="success" type="request" value="etlConfiguration" />
		<response name="error" type="request" value="etlConfiguration" />
	</request-map>
	
	<request-map uri="removeEtlModelGrouping">
		<security https="false" auth="true" />
		<event type="service" invoke="removeEtlModelGrouping" />
		<response name="success" type="request" value="etlConfiguration" />
		<response name="error" type="request" value="etlConfiguration" />
	</request-map>		 	
	
	<request-map uri="addEtlProcessGrouping">
		<security https="false" auth="true" />
		<event type="service" invoke="addEtlProcessGrouping" />
		<response name="success" type="request" value="etlConfiguration" />
		<response name="error" type="request" value="etlConfiguration" />
	</request-map>   
	
	<request-map uri="updateEtlProcessGrouping">
		<security https="false" auth="true" />
		<event type="service" invoke="updateEtlProcessGrouping" />
		<response name="success" type="request" value="etlConfiguration" />
		<response name="error" type="request" value="etlConfiguration" />
	</request-map>
	
	<request-map uri="removeEtlProcessGrouping">
		<security https="false" auth="true" />
		<event type="service" invoke="removeEtlProcessGrouping" />
		<response name="success" type="request" value="etlConfiguration" />
		<response name="error" type="request" value="etlConfiguration" />
	</request-map>		
	<request-map uri="logAccount">
		<security https="true" auth="true" />
		<response name="success" type="view" value="etlLogs" />
	</request-map>
	<request-map uri="etlLogs">
		<security https="true" auth="false" />
		<response name="success" type="view" value="etlLogs" />
		<response name="error" type="view" value="etlLogs" />
	</request-map>
	<request-map uri="setStoreLocale">
		  <security https="true" auth="false"/>
		  <event type="java" path="org.opentaps.common.event.AjaxEvents" invoke="setStoreLocale"/>
		  <response name="success" type="none"/>
		  <response name="error" type="none"/>
	 </request-map>
 <request-map uri="assignExpModel">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.ajax.EtlAjaxEvents"
			invoke="assignExpModel" />
		<response name="success" type="request-redirect" value="applyEtlModel" >
			<redirect-parameter name="model"/>
		</response>
		<response name="error" type="request-redirect" value="applyEtlModel" >
			<redirect-parameter name="model"/>
		</response>
	</request-map>
	<request-map uri="etlExtractModel">
		<security https="true" auth="false" />
		<response name="success" type="view" value="etlExtractModel" />
		<response name="error" type="view" value="etlExtractModel" />
	</request-map>
	<request-map uri="getExtractModels">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.service.EtlReportServices"
			invoke="getExtractModelsData" />
		<response name="success" type="none" />
		<response name="error" type="none" />
	</request-map>
	<request-map uri="extractOrderModelService">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.service.EtlReportServices"
			invoke="generateOrderModelCsv" />
		<response name="success" type="view" value="etlExtractModel" />
		<response name="error" type="view" value="etlExtractModel" />
	</request-map>
	<request-map uri="extractProductModelService">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.service.EtlReportServices"
			invoke="generateProductModelCsv" />
		<response name="success" type="view" value="etlExtractModel" />
		<response name="error" type="view" value="etlExtractModel" />
	</request-map>
	<request-map uri="extractCustomerModelService">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.service.EtlReportServices"
			invoke="generateCustomerModelCsv" />
		<response name="success" type="view" value="etlExtractModel" />
		<response name="error" type="view" value="etlExtractModel" />
	</request-map>
	<request-map uri="etlBatches">
		<security https="true" auth="false" />
		<response name="success" type="view" value="etlBatches" />
		<response name="error" type="view" value="etlBatches" />
	</request-map>
	<request-map uri="getEtlBatchesModels">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.service.EtlReportServices"
			invoke="getEtlBatchesModelsData" />
		<response name="success" type="none" />
		<response name="error" type="none" />
	</request-map>
	<request-map uri="extractAccountsModelService">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.service.EtlReportServices"
			invoke="generateAccountsModelCsv" />
		<response name="success" type="view" value="etlExtractModel" />
		<response name="error" type="view" value="etlExtractModel" />
	</request-map>
	<request-map uri="extractSuppliersModelService">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.service.EtlReportServices"
			invoke="generateSuppliersModelCsv" />
		<response name="success" type="view" value="etlExtractModel" />
		<response name="error" type="view" value="etlExtractModel" />
	</request-map>
	<request-map uri="extractCategoryModelService">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.service.EtlReportServices"
			invoke="generateCategoryModelCsv" />
		<response name="success" type="view" value="etlExtractModel" />
		<response name="error" type="view" value="etlExtractModel" />
	</request-map>
	<request-map uri="extractInvoiceModelService">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.service.EtlReportServices"
			invoke="generateInvoiceModelCsv" />
		<response name="success" type="view" value="etlExtractModel" />
		<response name="error" type="view" value="etlExtractModel" />
	</request-map>
	<request-map uri="extractInvoiceItemModelService">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.service.EtlReportServices"
			invoke="generateInvoiceItemModelCsv" />
		<response name="success" type="view" value="etlExtractModel" />
		<response name="error" type="view" value="etlExtractModel" />
	</request-map>
	
	
	<!-- By sharif [start] -->
	
	<request-map uri="uploadFile">
		<security https="true" auth="false" />
		<event type="java" path="org.groupfio.etl.process.event.ETLFileUpload"
			invoke="uploadFile" />
			
		<response name="success" type="request-redirect" value="myHome" >
			<redirect-parameter name="listName" />
		</response>
		<response name="error" type="view" value="myHome" />
		
		<response name="success-apply" type="request-redirect" value="applyEtlModel">
			<redirect-parameter name="model" />
			<redirect-parameter name="processId" />
			<redirect-parameter name="id" value="1" />
		</response>
		<response name="error-apply" type="request-redirect" value="applyEtlModel">
			<redirect-parameter name="model" />
			<redirect-parameter name="processId" />
			<redirect-parameter name="id" value="1" />
		</response>
		
	</request-map>
	
	<!-- <request-map uri="uploadFile">
		<security https="true" auth="false" />
		<event type="java" path="org.etlprocess.upload.ETLFileUpload"
			invoke="uploadEtlFileService" />
		<response name="success" type="request-redirect" value="applyEtlModel">
			<redirect-parameter name="model" />
			<redirect-parameter name="id" value="1" />
		</response>
		<response name="error" type="request-redirect" value="applyEtlModel">
			<redirect-parameter name="model" />
			<redirect-parameter name="processId" />
			<redirect-parameter name="id" value="1" />
		</response>
	</request-map> -->
	
	<!-- ajax requests -->
    <request-map uri="updateEtlModelDefaults">
        <event type="java" path="org.groupfio.etl.process.event.AjaxEvents" invoke="updateEtlModelDefaults"/>
        <response name="success" type="none"/>
        <response name="error" type="none"/>
    </request-map>
    <request-map uri="updateEtlModelElementDefaults">
        <event type="java" path="org.groupfio.etl.process.event.AjaxEvents" invoke="updateEtlModelElementDefaults"/>
        <response name="success" type="none"/>
        <response name="error" type="none"/>
    </request-map>
    <request-map uri="updateEtlModelElementFilters">
        <event type="java" path="org.groupfio.etl.process.event.AjaxEvents" invoke="updateEtlModelElementFilters"/>
        <response name="success" type="none"/>
        <response name="error" type="none"/>
    </request-map>
    <request-map uri="getEtlModelElementDefaults">
        <event type="java" path="org.groupfio.etl.process.event.AjaxEvents" invoke="getEtlModelElementDefaults"/>
        <response name="success" type="none"/>
        <response name="error" type="none"/>
    </request-map>
    <request-map uri="updateEtlModelFilters">
        <event type="java" path="org.groupfio.etl.process.event.AjaxEvents" invoke="updateEtlModelFilters"/>
        <response name="success" type="none"/>
        <response name="error" type="none"/>
    </request-map>
    <request-map uri="updateEtlModelNotifications">
        <event type="java" path="org.groupfio.etl.process.event.AjaxEvents" invoke="updateEtlModelNotifications"/>
        <response name="success" type="none"/>
        <response name="error" type="none"/>
    </request-map>
    <request-map uri="getEtlModelElementFilters">
        <event type="java" path="org.groupfio.etl.process.event.AjaxEvents" invoke="getEtlModelElementFilters"/>
        <response name="success" type="none"/>
        <response name="error" type="none"/>
    </request-map>
    <request-map uri="getEtlModelFilters">
        <event type="java" path="org.groupfio.etl.process.event.AjaxEvents" invoke="getEtlModelFilters"/>
        <response name="success" type="none"/>
        <response name="error" type="none"/>
    </request-map>
    <request-map uri="getEtlModelNotifications">
        <event type="java" path="org.groupfio.etl.process.event.AjaxEvents" invoke="getEtlModelNotifications"/>
        <response name="success" type="none"/>
        <response name="error" type="none"/>
    </request-map>
    <request-map uri="removeAllMapping">
		<security https="true" auth="false" />
		<event type="java" invoke="removeAllMapping" path="org.groupfio.etl.process.event.AjaxEvents" />
		<response name="success" type="none" />
		<response name="error" type="none" />
	</request-map>
	<request-map uri="autoMapElements">
		<security https="true" auth="false" />
		<event type="java" invoke="autoMapElements" path="org.groupfio.etl.process.event.AjaxEvents" />
		<response name="success" type="none" />
		<response name="error" type="none" />
	</request-map>
	
	<request-map uri="importFileByBatch">
		<security auth="true" https="false"/>
		<event type="service" invoke="importFileByBatch" />
		<response name="success" type="request-redirect" value="etlBatches">
			<redirect-parameter name="batchId" />
			<redirect-parameter name="groupId" />
			<redirect-parameter name="processId" />
		</response>
		<response name="error" type="none"/>
	</request-map>
	
	<request-map uri="getEtlModels">
        <event type="java" path="org.groupfio.etl.process.event.AjaxEvents" invoke="getEtlModels"/>
        <response name="success" type="none"/>
        <response name="error" type="none"/>
    </request-map>
	
	<!-- By sharif [end] -->

	<request-map uri="crossReferences">
		<security https="true" auth="false" />
		<response name="success" type="view" value="crossReferences" />
		<response name="error" type="view" value="crossReferences" />
	</request-map>
	<request-map uri="createCrossReference">
		  <security https="true" auth="false"/>
		  <event type="java" path="org.opentaps.common.event.AjaxEvents" invoke="createCrossReference"/>
		  <response name="success" type="request-redirect-noparam" value="crossReferences"/>
	 </request-map>
	<request-map uri="findModelByType">
		<security auth="false" https="false"/>
		<event type="service" invoke="findModelByType" />
		<response name="success" type="view" value="serviceOutXml"/>
		<response name="error" type="none"/>
	</request-map>
	
	<request-map uri="findModelDefinitionByIdOrName">
		<security auth="false" https="false"/>
		<event type="service" invoke="findModelByIdOrName" />
		<response name="success" type="view" value="serviceOutXml"/>
		<response name="error" type="none"/>
	</request-map>
	
	<request-map uri="runModel">
		<security auth="false" https="false"/>
		<event type="service" invoke="executeEtlModelService" />
		<response name="success" type="view" value="serviceOutXml"/>
		<response name="error" type="none"/>
	</request-map>
	
	<request-map uri="downloadFile">
        <event type="java" path="org.groupfio.common.portal.event.TemplateContentEvents" invoke="downloadFile"/>
        <response name="success" type="none"/>
        <response name="error" type="none"/>
    </request-map>
		
	<!-- View Mappings -->
  	<view-map name="login" type="screen" page="component://admin-portal/widget/common/CommonScreens.xml#login"/>
	<view-map name="etlUsers" type="screen"
		page="component://Etl-Process/widget/MyHomeScreens.xml#etlUsers" />

	<view-map name="myHome" type="screen" page="component://Etl-Process/widget/MyHomeScreens.xml#myHome" />
	<view-map name="etlProcessConfiguration" type="screen" page="component://Etl-Process/widget/MyHomeScreens.xml#etlProcessConfiguration" />
	<view-map name="applyEtlModel" type="screen" page="component://Etl-Process/widget/MyHomeScreens.xml#applyEtlModel" />
	<view-map name="etlConfigurationExt" type="screen"	page="component://Etl-Process/widget/MyHomeScreens.xml#etlConfigurationExt" />
	<view-map name="etlLogs" type="screen" page="component://Etl-Process/widget/MyHomeScreens.xml#etlLogs" />
	<view-map name="etlExtractModel" type="screen" page="component://Etl-Process/widget/MyHomeScreens.xml#etlExtractModel" />
	<view-map name="etlBatches" type="screen"	page="component://Etl-Process/widget/MyHomeScreens.xml#etlBatches" />
	<view-map name="crossReferences" type="screen"	page="component://Etl-Process/widget/MyHomeScreens.xml#crossReferences" />
	<view-map name="serviceOutXml" type="ftl" page="component://Etl-Process/webapp/Etl-Process/shared/serviceOutXml.ftl" content-type="text/xml"/>
	
</site-conf>